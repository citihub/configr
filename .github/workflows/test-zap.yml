name: test-zap                                                                                                                                                                                                        
on: workflow_dispatch                                                                                                                                                                                                 
                                                                                                                                                                                                                      
jobs:                                                                                                                                                                                                                 
  zap_scan:                                                                                                                                                                                                           
    runs-on: ubuntu-latest                                                                                                                                                                                            
    name: Scan the API                                                                                                                                                                                                
    steps:                                                                                                                                                                                                            
      - uses: actions/checkout@v2                                                                                                                                                                                     
      - name: ZAP Scan                                                                                                                                                                                                
        uses: zaproxy/action-api-scan@v0.1.0                                                                                                                                                                          
        with:                                                                                                                                                                                                         
          token: ${{ secrets.GITHUB_TOKEN }}                                                                                                                                                                          
          docker_name: 'owasp/zap2docker-stable'                                                                                                                                                                      
          format: openapi                                                                                                                                                                                             
          target: 'http://configr-dev.eastus2.azurecontainer.io:8080/'
